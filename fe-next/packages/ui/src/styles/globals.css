@import 'tailwindcss';

@source "../../../apps/**/*.{ts,tsx}";
@source "../../../components/**/*.{ts,tsx}";
@source "../**/*.{ts,tsx}";

@import 'tw-animate-css';

@theme {
  /* --- Typography --- */
  --font-serif: 'Source Serif 4', serif;
  --font-sans: 'Inter', sans-serif;
  --font-mono: 'JetBrains Mono', monospace;

  /* --- Semantic Colors --- */

  /* Layer 1: The Desk (物理环境) */
  --color-desk: var(--desk); /* #f0f0ef */
  --color-paper: var(--paper); /* #ffffff */
  --color-sidebar: var(--sidebar); /* #f7f7f6 */

  --color-ink: var(--ink); /* #1c1917 (Stone-900) */
  --color-ink-muted: var(--ink-muted); /* Stone-500 */
  --color-ink-faint: var(--ink-faint); /* Stone-200 */

  /* Layer 2: Cognition (认知与行动) */
  --color-action: var(--action); /* Emerald (Growth/Execute) */
  --color-action-hover: var(--action-hover);
  --color-thought: var(--thought); /* Amber (Insight/Highlight) */
  --color-thought-bg: var(--thought-bg);

  --color-border: var(--border);
  --color-input: var(--input);
  --color-ring: var(--action); 
  
  --color-background: var(--desk);
  --color-foreground: var(--ink);

  --color-primary: var(--action); 
  --color-primary-foreground: #ffffff; 

  --color-secondary: var(--sidebar);
  --color-secondary-foreground: var(--ink);
  
  --color-muted: var(--sidebar);
  --color-muted-foreground: var(--ink-muted);
  
  --color-accent: var(--sidebar); 
  --color-accent-foreground: var(--action); 
  
  --color-destructive: var(--destructive);
  --color-destructive-foreground: var(--destructive-foreground);
  
  --color-popover: var(--paper);
  --color-popover-foreground: var(--ink);
  
  --color-card: var(--paper);
  --color-card-foreground: var(--ink);

  /* --- Shadows & Radius --- */
  --radius: 0.5rem; /* 8px - 稍微锐利一点 */
  --radius-lg: var(--radius);
  --radius-md: calc(var(--radius) - 2px);
  --radius-sm: calc(var(--radius) - 4px);

  /* 核心阴影：实体纸张 */
  --shadow-page: 0 1px 3px rgba(0, 0, 0, 0.05), 0 20px 40px -10px rgba(28, 25, 23, 0.08);
  /* 核心阴影：水晶输入栏 */
  --shadow-crystal:
    0 16px 32px -8px rgba(0, 0, 0, 0.1), 0 4px 8px -4px rgba(0, 0, 0, 0.05),
    inset 0 1px 0 rgba(255, 255, 255, 0.9);
  /* 基础卡片 */
  --shadow-card: 0 1px 2px 0 rgba(0, 0, 0, 0.05);

  /* --- Animations --- */
  --animate-pulse-slow: pulse 4s cubic-bezier(0.4, 0, 0.6, 1) infinite;
}

/* === 4. Dark Mode Strategy === */
@custom-variant dark (&:where(.dark, .dark *));

@layer base {
  :root {
    /* Color Palette (HSL for opacity support) */

    /* Base: Stone / Warm Grey */
    --desk: hsl(60 2% 94%); /* #f0f0ef */
    --paper: hsl(0 0% 100%); /* #ffffff */
    --sidebar: hsl(60 2% 96.5%); /* #f7f7f6 */

    --ink: hsl(24 5% 10%); /* #1c1917 (Stone-900) */
    --ink-muted: hsl(24 5% 45%); /* Stone-500 */
    --ink-faint: hsl(24 5% 90%); /* Stone-200 */

    --border: hsl(24 5% 90%); /* Stone-200 */
    --input: hsl(24 5% 90%);

    /* Semantics */
    --action: hsl(158 64% 52%); /* Emerald-500 */
    --action-hover: hsl(160 84% 39%); /* Emerald-600 */

    --thought: hsl(37 91% 44%); /* Amber-600 (Deep Amber) */
    --thought-bg: hsl(48 100% 96%); /* Amber-50 */

    /* Shadcn Specifics */
    --ring: var(--action); /* Focus ring uses Emerald */
    --destructive: hsl(0 84.2% 60.2%);
    --destructive-foreground: hsl(0 0% 98%);
  }

  .dark {
    /* Dark Mode: "Black Obsidian" (黑曜石风格) 
       保持稳重，不使用蓝色发光，使用深灰与金/绿点缀
    */
    --desk: hsl(240 10% 4%); /* Deep Black */
    --paper: hsl(240 6% 10%); /* Zinc-900 */
    --sidebar: hsl(240 6% 8%); /* Slightly lighter black */

    --ink: hsl(60 5% 90%); /* Off-white */
    --ink-muted: hsl(240 5% 60%);
    --ink-faint: hsl(240 6% 20%);

    --border: hsl(240 6% 20%);
    --input: hsl(240 6% 20%);

    /* Dark Semantics: Keep them vivid but readable */
    --action: hsl(158 64% 60%);
    --action-hover: hsl(158 64% 50%);
    --thought: hsl(37 91% 60%);
    --thought-bg: hsl(37 91% 10%);

    --primary-foreground: hsl(240 10% 4%);
  }
}

@layer base {
  * {
    @apply border-border outline-ring/50;
  }
  body {
    /* 全局应用: 桌面背景，衬线体，Emerald 选中文本 */
    @apply bg-desk text-ink font-serif antialiased selection:bg-action/20 selection:text-action-hover;
  }
}
